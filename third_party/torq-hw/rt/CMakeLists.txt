option(TORQ_HW_DEBUG "Enable AWS FPGA support" OFF)
if(TORQ_HW_DEBUG)
    set(torq_hw_defs "TORQ_HW_DEBUG=1")
endif()

file(GLOB rt_src *.c)
if(TORQ_ENABLE_AWS_FPGA)
    add_executable(torq_rt_aws ${rt_src})
    target_include_directories(torq_rt_aws PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/../reg)
    target_compile_definitions(torq_rt_aws PRIVATE ${torq_hw_defs})
    target_compile_definitions(torq_rt_aws PRIVATE AWS_FPGA)
    target_link_libraries(torq_rt_aws PUBLIC fpga_mgmt)
    install(TARGETS torq_rt_aws)
endif()
if(TORQ_ENABLE_SIMULATOR)
    add_executable(torq_rt_cm ${rt_src})
    target_include_directories(torq_rt_cm PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/../reg)
    target_compile_definitions(torq_rt_cm PRIVATE ${torq_hw_defs})
    target_compile_definitions(torq_rt_cm PRIVATE CMODEL)
    target_link_libraries(torq_rt_cm PRIVATE torq_cm)
    install(TARGETS torq_rt_cm)
endif()
