// This macro includes a binary file and creates symbols to find start, end and size
.macro BINARY_OBJ section, name, path, file
// In MACH we need to declare a section for each object
#ifdef __MACH__
    .section __DATA,__\section
#else
    .section .rodata
#endif
    .globl _binary_\name\()_start
    _binary_\name\()_start:
    .incbin "\path\()/\file"
    .globl _binary_\name\()_end
    _binary_\name\()_end:
    .globl _binary_\name\()_size
    _binary_\name\()_size = _binary_\name\()_end - _binary_\name\()_start
// In MACH we need to prepend an additional "_" to the symbol names
#ifdef __MACH__
    .globl __binary_\name\()_start
    __binary_\name\()_start = _binary_\name\()_start
    .globl __binary_\name\()_end
    __binary_\name\()_end = _binary_\name\()_end
#endif
.endm

// Section name must be less than 16 char
BINARY_OBJ css_k_ld, css_kernel_ld, ".", "css_kernel.ld"

BINARY_OBJ css_libc, css_libc_a, CSS_PREBUILT_DIR, "libc.a"
BINARY_OBJ css_libm, css_libm_a, CSS_PREBUILT_DIR, "libm.a"
BINARY_OBJ css_rt, css_compiler_rt_a, CSS_PREBUILT_DIR, "libclang_rt.builtins-riscv32.a"

@CSS_BINARY_OBJS@