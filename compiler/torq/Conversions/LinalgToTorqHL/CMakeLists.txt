set(sources
  Passes.cpp
  Patterns.cpp
  PatternUtils.cpp
  ArithToTorqHLPattern.cpp
  Conv1DPattern.cpp
  Conv2DPattern.cpp
  Conv2DMatmulPattern.cpp
  FCPattern.cpp
  PoolingPattern.cpp
  ElementWiseBinaryPattern.cpp
  ReduceMeanPattern.cpp
  Conv2DOpBigStridePattern.cpp
  TensorToTorqOrLinalgPattern.cpp
)

set(deps
    ::PassesIncGen
    MLIRArithDialect
    MLIRTensorDialect
    MLIRFunctionInterfaces
    MLIRIR
    MLIRPass
    MLIRTransformUtils
    MLIRLinalgTransforms
    MLIRTensorTransforms
    iree::compiler::Dialect::Util::IR
    iree::target::torq::Dialect::TorqHL::Dialect
    MLIRExecutionEngine
)

iree_tablegen_library(
  NAME
    PassesIncGen
  TD_FILE
    Passes.td
  OUTS
    --gen-pass-decls Passes.h.inc
)

iree_cc_library(
  NAME
    LinalgToTorqHL
  HDRS
    PassesDetail.h
    Passes.h
    Passes.h.inc
    Patterns.h
    OpPatternOptions.h
  SRCS
    ${sources}
  DEPS
    ${deps}
  PUBLIC
)
